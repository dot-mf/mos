# -*- coding: UTF-8 -*-  
import csv
import time
import math
start=time.clock()
fileName = "/Users/hr/Downloads/python/Detection/test.csv"#csv文件的路径
#读取文件内容
def allData():
    csv_reader = csv.reader(open(fileName))
    fileContent = []
    for row in csv_reader:
        fileContent.append(row)#一行行加入
    headers = fileContent[0];
    dataContent = [];
    labels=[];
    for i in range(1,len(fileContent)):
        dataContent.append(fileContent[i][-2])
        labels.append(fileContent[i][2])  #获取取要的那一列的所有内容 
    return headers,dataContent,labels
headers,dataContent,labels = allData()
#信息熵中pi是i出现的概率，H=pi*logpi
#计算信息熵的函数
def calEnt(labels):
    numEntries = len(labels)
    labelCounts={}
    for lable in labels:
        if lable not in labelCounts.keys():
            labelCounts[lable] = 0
        labelCounts[lable]+=1
    shannonEnt=0.0
    for key in labelCounts.keys():
        prob = float(labelCounts[key])/numEntries
        shannonEnt -= prob * math.log(prob,2) # 以2为底的对数
    return shannonEnt
res1 = calEnt(labels)
print res1
res2 = calEnt(dataContent)
print res2
end=time.clock()
print str(end-start)
